<div class="container">

<table style="width: 100%;"><tr>
<td>ivsacim</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fitting a Cumulative Intensity Model for Exposure Effects with Instrumental Variables</h2>

<h3>Description</h3>

<p>ivsacim is used to fit cumulative intensity models for exposure effects with instrumental variables.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ivsacim(
  time,
  event,
  instrument,
  IV_valid = TRUE,
  treatment_init,
  treatment_shift_time = NULL,
  max_time = NULL,
  max_time_bet = NULL,
  n_sim = 0,
  weights = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>the censored event time</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event</code></td>
<td>
<p>event indicator</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>instrument</code></td>
<td>
<p>the instrumental variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>IV_valid</code></td>
<td>
<p>whether assuming IV satisfies the exclusion restriction</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment_init</code></td>
<td>
<p>the initial treatment assignment</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treatment_shift_time</code></td>
<td>
<p>the shift time of each subject, if no shift for a subject, set as 0</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_time</code></td>
<td>
<p>the max time that we threshold for nonconstant effect</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_time_bet</code></td>
<td>
<p>the max time that we threshold for constant effect</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_sim</code></td>
<td>
<p>the number of resampling, set as 0 if no resampling is needed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>optional weights used in the estimating equation</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>ivsacim returns an object of class "ivsacim".
An object of class "ivsacim" is a list containing the following components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>stime</code></td>
<td>
<p>an estimate of the baseline hazards function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dB_D</code></td>
<td>
<p>an estimate of the increment of the treatment effect</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B_D</code></td>
<td>
<p>an estimate of the treatment effect</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta_D</code></td>
<td>
<p>an estimate of the constant treatment effect</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B_D_se</code></td>
<td>
<p>an estimate of the variance covariance matrix of B_D</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta_D_se</code></td>
<td>
<p>an estimate of the constant treatment effect</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by_prod</code></td>
<td>
<p>a byproduct, that will used by other functions</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">n = 400
event = rbinom(n, 1, 0.8)
IV = rbinom(n, 1, 0.5)
trt_init = IV
trt_shift = rep(0, n)
time = rexp(n)/(0.5 + trt_init * 0.2)
max_t = 3
max_t_bet = 3
n_sim = 0
fit &lt;- ivsacim(time, event, IV, TRUE, trt_init, 
trt_shift, max_t, max_t_bet, n_sim)
</code></pre>


</div>