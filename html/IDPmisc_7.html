<div class="container">

<table style="width: 100%;"><tr>
<td>draw.leg</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Produce a Legend or Key (Grid Function)</h2>

<h3>Description</h3>

<p>Produces (and possibly draws) a Grid frame grob which is a legend that
can be placed in other Grid plots.  <code>draw.leg</code> is a
slightly enhanced version of <code>draw.key</code> in
package <span class="pkg">lattice</span> V 0.12-3.
</p>


<h3>Usage</h3>

<pre><code class="language-R">draw.leg(key, draw=FALSE, vp=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>key</code></td>
<td>
<p> A list determining the key.  See details below and the
documentation for <code>xyplot</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>draw</code></td>
<td>
<p> logical, whether the grob is to be drawn. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vp</code></td>
<td>
<p> viewport </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Three new components are added to the list <code>key</code> of the original code
in package <span class="pkg">lattice</span> V 0.12-3: <code>between.rows</code>,
<code>between.title</code>, <code>adj.title</code>.  They allow to format the
legend in a more flexible way.  To ease the use of <code>draw.leg</code>, the
full description of <code>draw.key</code> and the here
interesting part of <code>xyplot</code> are also included:
<br>
The key essentially consists of a number of columns, possibly
divided into blocks, each containing some rows.   The contents of the
key are determined by (possibly repeated) components named
“rectangles”, “lines”, “points” or “text”.  Each of these
must be lists with relevant graphical parameters (see later)
controlling their appearance.  The <code>key</code> list itself can contain
graphical parameters, these would be used if relevant graphical
components are omitted from the other components.
</p>
<p>The length (number of rows) of each such column (except “text”s)
is taken to be the largest of the lengths of the graphical
components, including the ones specified outside (see the entry for
<code>rep</code> below for details on this).  The “text” component has to
have a character or expression vector as its first component, and
the length of this vector determines the number of rows.
</p>
<p>The graphical components that can be included in <code>key</code> (and
also in the components named “text”, “lines”, “points” and
“rectangles” as appropriate) are:
</p>

<ul>
<li> <p><code>cex=1</code>
</p>
</li>
<li> <p><code>col="black"</code>
</p>
</li>
<li> <p><code>lty=1</code>
</p>
</li>
<li> <p><code>lwd=1</code>
</p>
</li>
<li> <p><code>font=1</code>
</p>
</li>
<li> <p><code>fontface</code>
</p>
</li>
<li> <p><code>fontfamily</code>
</p>
</li>
<li> <p><code>pch=8</code>
</p>
</li>
<li> <p><code>adj=0</code>
</p>
</li>
<li> <p><code>type="l"</code>
</p>
</li>
<li> <p><code>size=5</code>
</p>
</li>
<li> <p><code>angle=0</code>
</p>
</li>
<li> <p><code>density=-1</code>
</p>
</li>
</ul>
<p><code>adj</code>, <code>angle</code> and <code>density</code> are currently
unimplemented.   <code>size</code> determines the width of columns of
rectangles and lines in character widths.  <code>type</code> is relevant
for lines; <code>"l"</code> denotes a line, <code>"p"</code> denotes a point,
and <code>"b"</code> and <code>"o"</code> both denote both together.
</p>
<p>Other possible components of <code>key</code> are:
</p>

<dl>
<dt><code>between</code></dt>
<dd>
<p>numeric vector giving the amount of space (character widths)
surrounding each column (split equally on both sides),
</p>
</dd>
<dt><code>title</code></dt>
<dd>
<p>string or expression giving a title for the key
</p>
</dd>
<dt><code>rep</code></dt>
<dd>
<p>logical, defaults to <code>TRUE</code>.   By default, it's assumed that
all columns in the key (except the “text”s) will have the same
number of rows, and all components are replicated to be as long
as the longest.  This can be suppressed by specifying
<code>rep=FALSE</code>, in which case the length of each column will
be determined by components of that column alone.
</p>
</dd>
<dt><code>cex.title</code></dt>
<dd>
<p>cex for the title
</p>
</dd>
<dt><code>background</code></dt>
<dd>
<p>background color, defaults to default background
</p>
</dd>
<dt><code>border</code></dt>
<dd>
<p>either a color for the border, or a logical.  In the latter
case, the border color is black if <code>border</code> is
<code>TRUE</code>, and no border is drawn if it is <code>FALSE</code> (the
default)
</p>
</dd>
<dt><code>transparent=FALSE</code></dt>
<dd>
<p>logical, whether key area should have a transparent background
</p>
</dd>
<dt><code>columns</code></dt>
<dd>
<p>the number of columns column-blocks the key is to be divided
into, which are drawn side by side.
</p>
</dd>
<dt><code>between.columns</code></dt>
<dd>
<p>Space between column blocks, in addition to <code>between</code>.
</p>
</dd>
<dt><code>between.rows</code></dt>
<dd>
<p>New argument: Space between rows.
</p>
</dd>
<dt><code>between.title</code></dt>
<dd>
<p>New argument: Space between top row and title of legend.
</p>
</dd>
<dt><code>adj.title</code></dt>
<dd>
<p>New argument: Adjustment of title in respect to body of
legend.
<br><code>adj.title = 0</code> adjusts the title to the left,
<br><code>adj.title = 1</code> adjusts the title to the right and
<br><code>adj.title = 0.5</code> (=default) centers the title.
</p>
</dd>
<dt><code>divide</code></dt>
<dd>
<p>Number of point symbols to divide each line when <code>type</code> is
<code>"b"</code> or <code>"o"</code> in <code>lines</code>.
</p>
</dd>
</dl>
<h3>Value</h3>

<p>A Grid frame object (that inherits from “grob”)
</p>


<h3>Author(s)</h3>

<p>Deepayan Sarkar, modified by Rene Locher</p>


<h3>See Also</h3>

<p><code>xyplot</code></p>


<h3>Examples</h3>

<pre><code class="language-R">require(grid)

## Legend 2 cm below and 1 cm left of the upper right corner
grid.newpage()
key &lt;- draw.leg(key =
                    list(rectangles = list(col=1:3,
                             size = 2,
                             lwd = 0.5),
                         text = list(LETTERS[1:3]),
                         cex = 1.2,
                         between = 2,
                         between.rows = 0.5,
                         between.title = 0.7,
                         title = "component",
                         cex.title = 1.4,
                         transparent = TRUE))

vp.key &lt;-  viewport(x = convertX(unit(1,"npc")-unit(1,"cm"),"cm"),
                    y = convertY(unit(1,"npc")-unit(2,"cm"),"cm"),
                    width=grobWidth(key),
                    height=grobHeight(key),
                    just=c("right","top"))

pushViewport(vp.key)
grid.draw(key)
popViewport()

##----------------------------------------
## Legend 1 cm above the lower left corner
key &lt;- draw.leg(key = list(rectangles = list(col=1:3,
                             size = 4,
                             lwd = 0.5),
                  text=list(letters[1:3]),
                  lines=list(col=1:3),
                  cex=2,
                  between=2,
                  between.rows=0.5,
                  between.title=0.7,
                  title = "component",
                  adj.title = 0,
                  cex.title = 2.4,
                  transparent = TRUE))

vp.key &lt;-  viewport(x = 0,
                    y = unit(1,"cm"),
                    width=grobWidth(key),
                    height=grobHeight(key),
                    just=c("left","bottom"))

grid.newpage()
pushViewport(vp.key)
grid.draw(key)
popViewport()
</code></pre>


</div>