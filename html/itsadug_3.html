<div class="container">

<table style="width: 100%;"><tr>
<td>acf_resid</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate an ACF plot of model residuals. Works for lm, lmer, gam, bam, ....</h2>

<h3>Description</h3>

<p>Wrapper around <code>acf_plot</code> and 
<code>acf_n_plots</code> for regression models.
</p>


<h3>Usage</h3>

<pre><code class="language-R">acf_resid(
  model,
  split_pred = NULL,
  n = 1,
  plot = TRUE,
  check.rho = NULL,
  main = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>A regression model generated by <code>lm</code>, <code>glm</code>,
<code>lmer</code>, <code>glmer</code>, <code>gam</code>, 
or <code>bam</code>.
(See examples for how to avoid errors due to missing values.)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>split_pred</code></td>
<td>
<p>Vector with names of model predictors that determine
the time series in the data, or should be used to split the ACF plot by.
Alternatively, <code>split_pred</code> can be a named list as being used by 
<code>acf_plot</code> and <code>acf_n_plots</code>.
Yet another option is to provide the text string 'AR.start', for a model 
that includes an AR1 model. The events are derived from the AR.start column 
if that is provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>The number of plots to generate. If <code>n</code>=1 (default) then 
<code>acf_plot</code> is being called. If <code>n</code>&gt;1 then 
<code>acf_n_plots</code> is being called.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>Logical: whether or not to produce plot. Default is TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check.rho</code></td>
<td>
<p>Numeric value: Generally leave at NULL. This value does 
not change anything, but it is used to check whether the model's AR1 
coefficient matches the expected value of rho.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>Text string, title of plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments as input for <code>acf_plot</code> 
or <code>acf_n_plots</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An aggregated ACF plot and / or optionally a list with the aggregated ACF values.
</p>


<h3>Author(s)</h3>

<p>Jacolien van Rij
</p>


<h3>See Also</h3>

<p>Use <code>acf</code> for the original ACF function, 
and <code>acf_plot</code>, or <code>acf_n_plots</code>.
</p>
<p>Other functions for model criticism: 
<code>acf_n_plots()</code>,
<code>acf_plot()</code>,
<code>derive_timeseries()</code>,
<code>resid_gam()</code>,
<code>start_event()</code>,
<code>start_value_rho()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(simdat)

# add missing values to simdat:
simdat[sample(nrow(simdat), 15),]$Y &lt;- NA

## Not run: 
# Run GAMM model:
m1 &lt;- bam(Y ~ te(Time, Trial)+s(Subject, bs='re'), data=simdat)

# Using a list to split the data:
acf_resid(m1, split_pred=list(simdat$Subject, simdat$Trial))
# ...or using model predictors:
acf_resid(m1, split_pred=c('Subject', 'Trial'))

# Calling acf_n_plots:
acf_resid(m1, split_pred=c('Subject', 'Trial'), n=4)
# add some arguments:
acf_resid(m1, split_pred=c('Subject', 'Trial'), n=4, max_lag=10)

# This does not work...
m2 &lt;- lm(Y ~ Time, data=simdat)
acf_resid(m2, split_pred=c('Subject', 'Trial'))
# ... but this is ok:
acf_resid(m2, split_pred=list(simdat$Subject, simdat$Trial))

# Using AR.start column:
simdat &lt;- start_event(simdat, event=c('Subject', 'Trial'))
r1 &lt;- start_value_rho(m1)
m3 &lt;- bam(Y ~ te(Time, Trial)+s(Subject, bs='re'), data=simdat, 
    rho=r1, AR.start=simdat$start.event)
acf_resid(m3, split_pred='AR.start')
# this is the same:
acf_resid(m3, split_pred=c('Subject', 'Trial'))
# Note: use model comparison to find better value for rho

## End(Not run)
# see the vignette for examples:
vignette('acf', package='itsadug')
</code></pre>


</div>