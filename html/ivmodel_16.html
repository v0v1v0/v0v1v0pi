<div class="container">

<table style="width: 100%;"><tr>
<td>distributionBalancePlot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot randomization distributions of the Mahalanobis distance</h2>

<h3>Description</h3>

<p><code>distributionBalancePlot</code> displays the randomization distribution of the square root of the Mahalanobis distance across the treatment and/or instrument for different assignment mechanisms. This function supports complete randomization (displayed in black), block randomization (displayed in green), and Bernoulli trials for exposure (displayed in red) and instrument (displayed in blue). This function is used to create Figure 4 of Branson and Keele (2020).
</p>


<h3>Usage</h3>

<pre><code class="language-R">distributionBalancePlot(X, D = NULL, Z = NULL, subclass = NULL,
complete = FALSE, blocked = FALSE, bernoulli = FALSE, perms = 1000)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>Covariate matrix (with units as rows and covariates as columns).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>D</code></td>
<td>
<p>Indicator vector for a binary treatment (must contain 1 or 0 for each unit).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Z</code></td>
<td>
<p>Indicator vector for a binary instrument (must contain 1 or 0 for each unit).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subclass</code></td>
<td>
<p>Vector of subclasses (one for each unit). Subclasses can be numbers or characters, as long as there is one specified for each unit. Only needed if <code>blocked = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>complete</code></td>
<td>
<p>If <code>TRUE</code>, displays the randomization distribution of the Mahalanobis distance under complete randomization.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>blocked</code></td>
<td>
<p>If <code>TRUE</code>, displays the randomization distribution of the Mahalanobis distance under block randomization. Needs <code>subclass</code> specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bernoulli</code></td>
<td>
<p>If <code>TRUE</code>, displays the randomization distribution of the Mahalanobis distance under Bernoulli trials for the treatment and for the instrument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>perms</code></td>
<td>
<p>Number of permutations used to approximate the randomization distributions.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Plot of randomization distributions of the square root of the Mahalanobis distance across the treatment and/or instrument for different assignment mechanisms.
</p>


<h3>Author(s)</h3>

<p>Zach Branson and Luke Keele
</p>


<h3>References</h3>

<p>Branson, Z. and Keele, L. (2020). Evaluating a Key Instrumental Variable Assumption Using Randomization Tests. American Journal of Epidemiology. To appear.
</p>


<h3>Examples</h3>

<pre><code class="language-R">  #load the data
  data(icu.data)
  #the covariate matrix is
  X = as.matrix(subset(icu.data, select = -c(open_bin, icu_bed)))
  #the treatment
  D = icu.data$icu_bed
  #the instrument
  Z = icu.data$open_bin
  #the subclass
  subclass = icu.data$site
  #make distribution plot of sqrt(MD) for
  #complete randomization, block randomization, and bernoulli trials
  #(just uncomment the code below)
  #distributionBalancePlot(X = X, D = D, Z = Z, subclass = subclass,
  #complete = TRUE, blocked = TRUE, bernoulli = TRUE, perms = 500)
</code></pre>


</div>