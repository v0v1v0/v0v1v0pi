<div class="container">

<table style="width: 100%;"><tr>
<td>tts.caret</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Train time series by <code>caret</code> and produce two types of time series forecasts: static and dynamic</h2>

<h3>Description</h3>

<p>It generates both the static and dynamic time series plots of machine learning prediction object generated by package <code>caret</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">
tts.caret(
  y,
  x=NULL,
  method,
  train.end,
  arOrder=2,
  xregOrder=0,
  type,
  tuneLength =10,
  preProcess = NULL,
  resampling="boot",
  Number=NULL,
  Repeat=NULL)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>

<p>The time series object of the target variable, or the dependent variable,  with <code>timeSeries</code> or <code>zoo</code> format, must have dimension. y can be either binary or continuous.Timestamp format must be "
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p> The time series matrix of input variables, or the independent variables,  with <code>timeSeries</code> or <code>zoo</code> format.Timestamp format must be "
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>The train_model_list of <code>caret</code>. While using this, make sure that the method allows regression. Methods in c("svm","rf","rpart","gamboost","BstLm","bstSm","blackboost") are feasible.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>train.end</code></td>
<td>
<p>The end date of training data, must be specificed.The default dates of train.start and test.end are the start and the end of input data; and the test.start is the 1-period next of train.end.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arOrder</code></td>
<td>
<p>The autoregressive order of the target variable, which may be sequentially specifed like arOrder=1:5; or discontinuous lags like arOrder=c(1,3,5); zero is not allowed.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xregOrder</code></td>
<td>
<p>The distributed lag structure of the input variables, which may be sequentially specifed like xregOrder=0:5; or discontinuous lags like xregOrder=c(0,3,5); zero is allowed since contemporaneous correlation is allowed.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>The additional input variables. We have four selection:<br> "none"=no other variables,<br> "trend"=inclusion of time dummy, <br> "season"=inclusion of seasonal dummies, <br> "both"=inclusion of both trend and season. No default.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tuneLength</code></td>
<td>
<p>The same as the length specified in  train function of package <code>caret</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>preProcess</code></td>
<td>
<p>Whether to pre-process the data, current possibilities are "BoxCox", "YeoJohnson", "expoTrans", "center", "scale", "range", "knnImpute", "bagImpute", "medianImpute", "pca", "ica" and "spatialSign".The default is no pre-processing. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resampling</code></td>
<td>
<p>The method for resampling, as trainControl function list in package <code>caret</code>. The default is "boot" for  bootstrapping with 25 replications. Current choices are c("cv","boot","repeatedcv","LOOCV") where "cv" is K-fold CV with a default K=10 or specified by the "Number" below, "LOOCV" denotes the leave-one-out CV</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Number</code></td>
<td>
<p>The number of K for K-Fold CV, default (NULL) is 10; for "boot" option, the default number of replications is 25</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Repeat</code></td>
<td>
<p>The number for the repeatition for "repeatedcv". </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function calls the train function of package <code>caret</code> to execute estimation. When execution finished, we compute two types of time series forecasts: static and recursive.
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p>Output object generated by train function of <code>caret</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arOrder</code></td>
<td>
<p>The autoregressive order of the target variable used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The dataset of imputed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dataused</code></td>
<td>
<p>The data used by arOrder, xregOrder, and type.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>training.Pred</code></td>
<td>
<p>All tuned prediction values of training data, using besTunes to extract the best prediction.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Ho Tsung-wu &lt;tsungwu@ntnu.edu.tw&gt;, College of Management, National Taiwan Normal University.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Cross-validation takes time, example below is commented.
## Machine Learning by library(caret)
library(zoo)
#Case 1. Low frequency
data("macrodata")
dep &lt;- macrodata[569:669,"unrate",drop=FALSE]
ind &lt;- macrodata[569:669,-1,drop=FALSE]
train.end &lt;- "2018-12-01"# Choosing the end dating of train

models &lt;- c("glm","knn","nnet","rpart","rf","svm","enet","gbm","lasso","bridge")[2]
type &lt;- c("none","trend","season","both")[1]
output &lt;- tts.caret(y=dep, x=NULL, arOrder=c(1), xregOrder=c(1),
 method=models, tuneLength =1, train.end, type=type,
 resampling=c("boot","cv","repeatedcv")[1],preProcess = "center")

 testData1 &lt;- window(output$dataused,start="2019-01-01",end=end(dep))
P1 &lt;- iForecast(Model=output,newdata=testData1,type="static")
P2 &lt;- iForecast(Model=output,newdata=testData1,type="dynamic")

tail(cbind(testData1[,1],P1,P2))

#Case 2. High frequency
#head(ES_15m)
#head(ES_Daily)
#dep &lt;- ES_15m #SP500 15-minute realized absolute variance
#ind &lt;- NULL
#train.end &lt;- as.character(rownames(dep))[as.integer(nrow(dep)*0.9)]

#models&lt;-c("svm","rf","rpart","gamboost","BstLm","bstSm","blackboost")[1]
#type&lt;-c("none","trend","season","both")[1]
# output &lt;- tts.caret(y=dep, x=ind, arOrder=c(3,5), xregOrder=c(0,2,4),
# method=models, tuneLength =10, train.end, type=type,
# resampling=c("boot","cv","repeatedcv")[2],preProcess = "center")
#testData1&lt;-window(output$data,start="2009-01-01",end=end(output$data))
#P1&lt;-iForecast(Model=output,newdata=testData1,type="static")
#P2&lt;-iForecast(Model=output,newdata=testData1,type="dynamic")

</code></pre>


</div>