<div class="container">

<table style="width: 100%;"><tr>
<td>msp2FSdb</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
msp to Fragmentation Spectra DataBase (FSDB)
</h2>

<h3>Description</h3>

<p>This function converts .msp (mass spectra format) files into a readable R object.
</p>


<h3>Usage</h3>

<pre><code class="language-R">msp2FSdb(path, MSPfile_vector = "", massIntegrationWindow = 0,
allowedNominalMass = FALSE, allowedWeightedSpectralEntropy = TRUE,
noiseRemovalRatio = 0.01, number_processing_threads = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>

<p>Address of .msp file(s)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MSPfile_vector</code></td>
<td>

<p>A vector of names of .msp files or one .msp file name.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>massIntegrationWindow</code></td>
<td>

<p>Mass window in Da to integrate adjacent peaks in the fragmentation spectra
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allowedNominalMass</code></td>
<td>

<p>c(TRUE, FALSE). Select 'TRUE' only for nominal mass analysis.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allowedWeightedSpectralEntropy</code></td>
<td>

<p>c(TRUE, FALSE). Weighted entropy to transform low abundant signals prior to calculating entropy similarity score. Please see the reference for details on wight transformation.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>noiseRemovalRatio</code></td>
<td>

<p>noise removal ratio ([0 - 1])relative to the basepeak to measure entropy similarity score.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>number_processing_threads</code></td>
<td>

<p>Number of processing threads for multi-threaded processing
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>logFSdb</code></td>
<td>

<p>Parameters used to create the FSDB object
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PrecursorMZ</code></td>
<td>

<p>A vector of precursor m/z values
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Precursor Type</code></td>
<td>

<p>A vector of precursor adduct types
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Retention Time</code></td>
<td>

<p>A vector of retention time values
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Num Peaks</code></td>
<td>

<p>A vector of num peaks values indicating number of ions for each fragment spectra
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Spectral Entropy</code></td>
<td>

<p>A vector of spectral entropy values
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FragmentList</code></td>
<td>

<p>A list of fragment ions
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MSPLibraryParameters</code></td>
<td>

<p>A dataframe of tabulated headers and their values for each msp block
</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>This function was designed not only to achieve the fastest computational speed; but also can standardize .msp files that were generated by inconsistent settings.
</p>


<h3>References</h3>

<p>Li, Y., Kind, T., Folz, J., Vaniya, A., Mehta, S.S. and Fiehn, O. (2021). Spectral entropy outperforms MS/MS dot product similarity for small-molecule compound identification. <em>Nature methods</em>, 18(12), 1524-1531, <a href="https://doi.org/10.1038/s41592-021-01331-z">doi:10.1038/s41592-021-01331-z</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">path_extdata &lt;- system.file("extdata", package = "IDSL.FSA")
MSPfile &lt;- c("Kynurenine_Kynurenic_acid.msp")
sampleFSdb &lt;- msp2FSdb(path = path_extdata, MSPfile)
</code></pre>


</div>