<div class="container">

<table style="width: 100%;"><tr>
<td>idtw</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Incremental DTW
</h2>

<h3>Description</h3>

<p>Update the DTW distance, cost matrices and direction matrices including the warping path for new observations of two time series.
</p>


<h3>Usage</h3>

<pre><code class="language-R">idtw(Q, C, newObs, gcm, dm, 
      dist_method = c("norm1", "norm2", "norm2_square"),
      step_pattern = c("symmetric2", "symmetric1"),
      diffM = NULL, ws = NULL, 
      return_cm = FALSE,
      return_diffM = FALSE,
      return_wp = FALSE,
      return_diffp = FALSE,
      return_QC = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Q</code></td>
<td>
<p>numeric vector, or matrix (see also <code>dtw</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>C</code></td>
<td>
<p>numeric vector, or matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newObs</code></td>
<td>
<p>vector or matrix of new observations to be appended to C</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gcm</code></td>
<td>
<p>global cost matrix, output from <code>dtw(Q, C, ...)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dm</code></td>
<td>
<p>direction matrix, output from <code>dtw(Q, C, ...)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dist_method</code></td>
<td>
<p>character, describes the method of distance measure. See also <code>dtw</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>step_pattern</code></td>
<td>
<p>character, describes the step pattern. See also <code>dtw</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diffM</code></td>
<td>
<p>differences matrix, output from <code>dtw(Q, C, ...)</code>. This matrix is an optional input parameter (default = NULL) that is necessary to return the path of differences. Only for univariate time series Q and C.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ws</code></td>
<td>
<p>integer, describes the window size for the sakoe chiba window. If NULL, then no window is applied. (default = NULL)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_cm</code></td>
<td>
<p>logical, if TRUE then the Matrix of costs (the absolute value) is returned. (default = FALSE)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_diffM</code></td>
<td>
<p>logical, if TRUE then the Matrix of differences (not the absolute value) is returned. (default = FALSE)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_wp</code></td>
<td>

<p>logical, if TRUE then the warping path is returned. (default = FALSE) If return_diffp == TRUE, then return_wp is set to TRUE as well.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_diffp</code></td>
<td>

<p>logical, if TRUE then the path of differences (not the absolute value) is returned. (default = FALSE)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_QC</code></td>
<td>

<p>logical, if TRUE then the input vectors Q and C are appended to the returned list. This is useful for the <code>plot.idtw</code> function.  (default = FALSE)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The dynamic time warping distance is the element in the last row and last column of the global cost matrix.
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>distance</code></td>
<td>
<p>the DTW distance, that is the element of the last row and last column of gcm</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gcm</code></td>
<td>
<p>global cost matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dm</code></td>
<td>
<p>direction matrix (3=up, 1=diagonal, 2=left)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wp</code></td>
<td>
<p>warping path</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ii</code></td>
<td>
<p>indices of Q of the optimal path</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jj</code></td>
<td>
<p>indices of C of the optimal path</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cm</code></td>
<td>
<p>Matrix of costs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diffM</code></td>
<td>
<p>Matrix of differences</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diffp</code></td>
<td>
<p>path of differences</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Q</code></td>
<td>
<p>input Q</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>C</code></td>
<td>
<p>input C</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>normalized_distance</code></td>
<td>
<p>the normalized DTW distance, see also <code>link{dtw}</code></p>
</td>
</tr>
</table>
<h3>References</h3>


<ul>
<li>
<p> Leodolter, M.; Pland, C.; Br√§ndle, N; <em>IncDTW: An R Package for Incremental Calculation of Dynamic Time Warping</em>. Journal of Statistical Software, 99(9), 1-23. doi: <a href="https://doi.org/10.18637/jss.v099.i09">10.18637/jss.v099.i09</a>
</p>
</li>
<li>
<p> Sakoe, H.; Chiba, S., <em>Dynamic programming algorithm optimization for spoken word recognition, Acoustics, Speech, and Signal Processing</em> [see also IEEE Transactions on Signal Processing], IEEE Transactions on , vol.26, no.1, pp. 43-49, Feb 1978. http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=1163055
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">#--- Compare the incremental calculation with the basic
# calculation from scratch.
Q &lt;- cumsum(rnorm(100))
C &lt;- Q[11:100] + rnorm(90, 0, 0.5)
newObs &lt;-  c(2, 3)# new observation
base &lt;- dtw(Q = Q, C = C, ws = 15, return_diffM = TRUE) 
base

# recalculation from scratch with new observations
result0 &lt;- dtw(Q = Q, C = c(C, newObs), ws = 15,  return_diffM = TRUE)

# the incremental step with new observations
result1 &lt;- idtw(Q, C, ws = 15, newO = newObs, gcm = base$gcm, 
                dm = base$dm, diffM = base$diffM, return_diffp = TRUE,  
                return_diffM = TRUE, return_QC = TRUE) 
print(result1, digits = 2)
plot(result1)


#--- Compare the incremental calculation with external calculated 
# costMatrix cm_add with the basic calculation from scratch.
cm_add &lt;- cm(Q, newObs)
result2 &lt;- idtw(Q = cm_add, C = "cm_add", ws = 15, newO = newObs, 
                gcm = base$gcm, dm = base$dm) 

c(result0$distance, result1$distance, result2$distance)


</code></pre>


</div>