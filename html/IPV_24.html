<div class="container">

<table style="width: 100%;"><tr>
<td>nested_chart</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Nested Chart</h2>

<h3>Description</h3>

<p>Creates a nested chart, showing several tests and their facets.
</p>


<h3>Usage</h3>

<pre><code class="language-R">nested_chart(
  data,
  cd_method = "aggregate",
  test_order = NULL,
  facet_order = NULL,
  xarrows = TRUE,
  subradius = 0,
  file_name = "none",
  size = 1,
  relative_scaling = 0,
  font = "sans",
  rotate_radians = 0,
  rotate_degrees = 0,
  subrotate_radians = 0,
  subrotate_degrees = 0,
  file_width = 10,
  file_height = 10,
  zoom_x = NULL,
  zoom_y = NULL,
  dpi = 500,
  color_global = "#11C1FF",
  color_nested = "#007AD6",
  fade = 85,
  cor_spacing = 0,
  tick = 0,
  rotate_tick_label = 0,
  dist_construct_label = 10,
  rotate_construct_label_radians = 0,
  rotate_construct_label_degrees = 0,
  dist_test_labels = 2/3,
  rotate_test_labels_radians = 0,
  rotate_test_labels_degrees = 0,
  cor_labels_tests = TRUE,
  cor_labels_facets = TRUE,
  title = NULL,
  size_title = 1,
  size_construct_label = 1,
  size_test_labels = 1,
  size_facet_labels = 1,
  width_axes = 1,
  width_axes_inner = 1,
  width_circles = 1,
  width_circles_inner = 1,
  width_tick = 1,
  width_tick_inner = 1,
  size_tick_label = 1,
  size_cor_labels = 1,
  size_cor_labels_inner = 1,
  width_xarrows = 1,
  size_xarrow_heads = 1,
  size_xarrow_labels = 1,
  size_marker = 0.1,
  size_marker_inner = 0.05
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>Object of class IPV as created by the function 'ipv_est'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cd_method</code></td>
<td>
<p>character; method to summarize center distances, either
"mean" or "aggregate", see details; defaults to "aggregate".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test_order</code></td>
<td>
<p>character; vector of test names in desired order
(counter-clockwise); defaults to NULL, in which case the order is based on
the correlation matrix columns in 'data'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>facet_order</code></td>
<td>
<p>character; vector of all facet names of all tests in
desired order (counter-clockwise); defaults to NULL, in which case the order
is based on the correlation matrix columns in 'data'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xarrows</code></td>
<td>
<p>logical; should arrows between tests be displayed?; defaults to
TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subradius</code></td>
<td>
<p>integer; same unit as center distances; radius of the facet
circles; defaults to 0, in which case an appropriate value is estimated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file_name</code></td>
<td>
<p>character; name of the file to save. Supported formats are:
"pdf" (highest quality and smallest file size), "png", "jpeg"; defaults to
"none".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p>integer; changes the size of most chart objects simultaneously.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>relative_scaling</code></td>
<td>
<p>integer; relative size of the global chart scale
compared to the nested facet chart scales; defaults to 0, in which case an
appropriate value is estimated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>font</code></td>
<td>
<p>character; text font, use extrafonts to access additional fonts;
defaults to "sans", which is "Helvetica".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rotate_radians</code></td>
<td>
<p>integer; radian angle to rotate the chart
counter-clockwise by; use fractions of pi (e.g. pi/2 = 90 degrees).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rotate_degrees</code></td>
<td>
<p>integer; angle in degrees to rotate the chart
counter-clockwise by.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subrotate_radians</code></td>
<td>
<p>integer; radian angle or vector of radian angles to
rotate the nested facet charts counter-clockwise by; use fractions of pi
(e.g. pi/2 = 90 degrees).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subrotate_degrees</code></td>
<td>
<p>integer; angle or vector of angles in degrees to
rotate the nested facet charts counter-clockwise by.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file_width</code></td>
<td>
<p>integer; file width in inches; defaults to 10.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file_height</code></td>
<td>
<p>integer; file height in inches; defaults to 10.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zoom_x</code></td>
<td>
<p>integer; vector with two values, the edges of the zoomed section
on the x-axis; defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zoom_y</code></td>
<td>
<p>integer; vector with two values, the edges of the zoomed section
on the y-axis; defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dpi</code></td>
<td>
<p>integer; resolution in dots per inch for "png" and "jpeg" files;
defaults to 500.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color_global</code></td>
<td>
<p>global accent color; defaults to light blue ("#11C1FF").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color_nested</code></td>
<td>
<p>nested accent color; defaults to blue ("#007AD6").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fade</code></td>
<td>
<p>integer; brightness of the gray tones between 0 (black) and 100
(white) in steps of 1; defaults to 85.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cor_spacing</code></td>
<td>
<p>integer; if <code>correlations = TRUE</code>: width of the ring,
the correlations between tests are drawn in; defaults to 0, in which case an
appropriate value is estimated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tick</code></td>
<td>
<p>numeric; axis tick position; defaults to 0, in which case an
appropriate value is estimated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rotate_tick_label</code></td>
<td>
<p>numeric; number of positions to move the tick label
(counter-clockwise); defaults to 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dist_construct_label</code></td>
<td>
<p>integer; position of the construct label relative
to the surrounding circle; defaults to 10, in which case an appropriate
value is estimated; a value of .5 would position the label halfway between
the center and the surrounding circle.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rotate_construct_label_radians</code></td>
<td>
<p>integer; radian angle to rotate the
construct label counter-clockwise by; use fractions of pi (e.g. pi/2 = 90
degrees).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rotate_construct_label_degrees</code></td>
<td>
<p>integer; angle in degrees to rotate the
construct label counter-clockwise by.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dist_test_labels</code></td>
<td>
<p>integer; position of the test labels relative to the
surrounding circle; defaults to 2/3, in which case the test labels are
displayed 2/3 of the way from the centers to the surrounding circles.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rotate_test_labels_radians</code></td>
<td>
<p>integer; radian angle or vector of radian
angles to rotate the test labels counter-clockwise by; use fractions of pi
(e.g. pi/2 = 90 degrees).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rotate_test_labels_degrees</code></td>
<td>
<p>integer; angle or vector of angle in degrees
to rotate the test labels counter-clockwise by.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cor_labels_tests</code></td>
<td>
<p>logical; if <code>TRUE</code>, shows the correlations
between tests as text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cor_labels_facets</code></td>
<td>
<p>logical; if <code>TRUE</code>, shows the correlations
between facets as text.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>character; overall chart title; defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size_title</code></td>
<td>
<p>integer; title font size relative to default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size_construct_label</code></td>
<td>
<p>integer; construct label font size relative to
default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size_test_labels</code></td>
<td>
<p>integer; test label font size relative to default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size_facet_labels</code></td>
<td>
<p>integer; facet label font size relative to default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width_axes</code></td>
<td>
<p>integer; global radial axis width relative to default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width_axes_inner</code></td>
<td>
<p>integer; nested radial axis width relative to default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width_circles</code></td>
<td>
<p>integer; global circle outline width relative to default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width_circles_inner</code></td>
<td>
<p>integer; nested circle outline width relative to
default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width_tick</code></td>
<td>
<p>integer; global axis tick line width relative to default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width_tick_inner</code></td>
<td>
<p>integer; nested axis tick line width relative to
default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size_tick_label</code></td>
<td>
<p>integer; axis tick label font size relative to default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size_cor_labels</code></td>
<td>
<p>integer; font size of the correlations between tests
relative to default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size_cor_labels_inner</code></td>
<td>
<p>integer; font size of the correlations between
facets relative to default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width_xarrows</code></td>
<td>
<p>integer; extra arrow line width relative to default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size_xarrow_heads</code></td>
<td>
<p>integer; extra arrow head length relative to default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size_xarrow_labels</code></td>
<td>
<p>integer; font size of the correlations indicated by
extra arrows relative to default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size_marker</code></td>
<td>
<p>integer; size (in inches) of the value marker  at the
circle border that indicates the center distance, a value of 0 omits the
marker; defaults to .1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size_marker_inner</code></td>
<td>
<p>integer; size (in inches) of the nested value marker
at the circle border that indicates the center distance, a value of 0 omits
the marker; defaults to .05</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>To summarize center distances (<code>cd_method</code>), the "mean" method
computes the average center distance (compute cds first, summarize across
items second), while the "aggregate" method computes a center distance based
on the sum of the squared loadings (summarize across items first, compute
cds second). "Aggregate" (default) is recommended, because it is more
meaningful in cases with heterogeneous factor loadings, while "mean" is the
originally proposed method.
</p>
<p>To get tidy results, it is often required to use <code>rotate_</code> and
<code>subrotate_</code> for better alignment.
</p>
<p>If you set <code>subrotate_</code> to a single value, all nested facet charts will
be rotated by the same amount. If you use a vector of values, the nested
facet charts will be rotated one by one by the values from that vector.
</p>
<p>Increase <code>relative_scaling</code> to avoid circle overlap. Decrease it to
make small chart objects more visible.
</p>
<p><code>correlations</code> and <code>cor_spacing</code> add larger circles around the
nested facet charts, but do not change these facet charts.
</p>
<p>When changing the size of objects, consider the <code>size</code> parameter first
and make specific adjustments with the other <code>size_</code> and <code>width_</code>
parameters after.
</p>
<p>Pdf files will be vector based and can be scaled arbitrarily. For other
formats use <code>file_width</code>, <code>file_height</code>, and <code>dpi</code> to avoid
later rescaling and loss of quality.
</p>
<p>Instead of using screenshots to crop the chart, it is highly recommendable
to use <code>zoom_x</code> and <code>zoom_y</code>. This allows for vector-based
graphics quality when showing sections of the chart. With this cropping
method, use <code>file_width</code> to set the overall size of the file output,
<code>file_height</code> will automatically adjust to retain the correct aspect
ratio, if both <code>zoom_x</code> and <code>zoom_y</code> are provided.
</p>
<p>If <code>facet1</code> or <code>facet2</code> is <code>NA</code> for a given xarrow, the arrow
will end on the test's circle. Note: this correlation is usually not part of
the model.
</p>
<p>Consider adding title and caption in your typesetting software (LaTeX, MS
Word, ...), not here. The option to add a title is only a quick and dirty
shurtcut. It reduces chart size and is inflexible. Adding the title manually
will provide additional options, but requires you to save to a file
manually. To manually add a title or caption use
<code>labs</code>.
</p>


<h3>Value</h3>

<p>Object of the class "ggplot".
</p>


<h3>See Also</h3>

<p><code>item_chart</code> <code>facet_chart</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># as simple as that
nested_chart(self_confidence)

# rotating the nested facet charts one by one
nested_chart(self_confidence,
             subrotate_radians = c(0, pi/2, 0))

# test without facets

global &lt;- system.file(
  "extdata", "IPV_global.xlsx", package = "IPV", mustWork = TRUE)
tests &lt;- c(
  system.file("extdata", "IPV_DSSEI.xlsx", package = "IPV", mustWork = TRUE),
  system.file("extdata", "IPV_SMTQ.xlsx", package = "IPV", mustWork = TRUE),
  NA)
x &lt;- input_excel(global = global, tests = tests)
nested_chart(x)

</code></pre>


</div>