<div class="container">

<table style="width: 100%;"><tr>
<td>objectParam</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Object Extraction Parameters Definition</h2>

<h3>Description</h3>

<p>Defines 'IFC_object' object extraction parameters.
</p>


<h3>Usage</h3>

<pre><code class="language-R">objectParam(
  ...,
  info,
  mode = c("rgb", "gray", "raw")[3],
  export = c("file", "matrix", "base64")[2],
  write_to,
  base64_id = FALSE,
  base64_att = "",
  overwrite = FALSE,
  composite = "",
  selection = "all",
  size = c(0, 0),
  force_width = TRUE,
  random_seed = NULL,
  removal = "none",
  add_noise = TRUE,
  full_range = FALSE,
  force_range = FALSE,
  spatial_correction = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments to be passed to <code>getInfo</code>, <strong>only</strong> if <code>'info'</code> is <strong>not</strong> provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>info</code></td>
<td>
<p>object of class 'IFC_info', rich information extracted by <code>getInfo</code>. 
This argument is not mandatory but it may allow to save time for repeated image export on same file.
If missing, the default, <code>'info'</code> will be extracted thanks to <code>'...'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p>color mode export. Either <code>"rgb"</code>, <code>"gray"</code> or <code>"raw"</code>. Default is <code>"raw"</code>.
Note that <code>"raw"</code> is only possible when <code>'export'</code> is <code>"matrix"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>export</code></td>
<td>
<p>format mode export. Either <code>"file"</code>, <code>"matrix"</code>, <code>"base64"</code>. Default is <code>"matrix"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>write_to</code></td>
<td>
<p>used when export is <code>"file"</code> or <code>"base64"</code> to compute respectively exported file name or base64 id attribute.<br>
Exported file extension and base64 MIME type will be deduced from this pattern. Allowed export are <code>".bmp"</code>, <code>".jpg"</code>, <code>".jpeg"</code>, <code>".png"</code>, <code>".tif"</code>, <code>".tiff"</code>.
Note that <code>".bmp"</code> are faster but not compressed producing bigger data.<br>
Placeholders, if found, will be substituted:<br>
-<code>%d</code>: with full path directory,<br>
-<code>%p</code>: with first parent directory,<br>
-<code>%e</code>: with extension (without leading .),<br>
-<code>%s</code>: with shortname (i.e. basename without extension),<br>
-<code>%o</code>: with object_id,<br>
-<code>%c</code>: with channel_id.<br>
A good trick is to use:<br>
-<code>"%d/%s/%s_%o_%c.tiff"</code>, when <code>'export'</code> is <code>"file"</code>,<br>
-<code>"%o_%c.bmp"</code>, when <code>'export'</code> is <code>"base64"</code>.<br>
Note that if missing and <code>'export'</code> is not <code>"file"</code>, <code>'write_to'</code> will be set to <code>"%o_%c.bmp"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base64_id</code></td>
<td>
<p>whether to add id attribute to base64 exported object. Default is <code>FALSE</code>.<br>
Only applied when export is <code>"base64"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base64_att</code></td>
<td>
<p>attributes to add to base64 exported object. Default is <code>""</code>.<br>
Only applied when export is <code>"base64"</code>. For example, use <code>"class='draggable'"</code>.<br>
Note that <code>id</code> (if <code>'base64_id'</code> is <code>TRUE</code>) and <code>width</code> and <code>height</code> are already used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>only apply when <code>'export'</code> is <code>"file"</code> whether to overwrite file or not. Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>composite</code></td>
<td>
<p>character vector of image composite. Default is <code>""</code>, for no image composite.<br>
Should be like <code>"1.05/2.4/4.55"</code> for a composition of 5 perc. of channel 1, 40 perc. of channel 2 and 50 perc. of channel 55.<br>
Note that channels should have been acquired and final image composition should be 100 perc., otherwise an error is thrown.<br>
Note that each composite will be appended after <code>'selection'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>selection</code></td>
<td>
<p>physical channels to extract.<br>
Note that this parameter will be ordered.<br>
Default is <code>"all"</code> to extract all acquired channels.<br>
Use <code>"none"</code> to only extract composite.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p>a length 2 integer vector of final dimensions of the image, height 1st and width 2nd. Default is <code>c(0,0)</code> for no change.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force_width</code></td>
<td>
<p>whether to use information in <code>'info'</code> to fill size. Default is <code>TRUE</code>.
When set to <code>TRUE</code>, width of <code>'size'</code> argument will be overwritten.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>random_seed</code></td>
<td>
<p>a list of elements to pass to set.seed or a single value, interpreted as an integer, or NULL to be used when <code>'add_noise'</code> is set to <code>TRUE</code>. Default is <code>NULL</code>.
Note that <code>NA_integer_</code> or <code>list(seed = NA_integer_)</code> can be used to not call set.seed at all.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>removal</code></td>
<td>
<p>removal method: Either <code>"none"</code>, <code>"raw"</code>, <code>"clipped"</code>, <code>"masked"</code>, <code>"MC"</code>.<br>
-<code>"none"</code>, to keep image as is, no mask extraction will be performed resulting in faster extraction,<br>
-<code>"raw"</code>, to keep image as is, it provides a convenient way to retrieve <code>"raw"</code> value for the mask,<br>
-<code>"clipped"</code>, to remove clipped object from image,<br>
-<code>"masked"</code>, to only keep masked object from image,<br>
-<code>"MC"</code>, to keep MC masked object from image.
This parameter will be repeated with rep_len() from <span class="pkg">base</span> for every physical channel that needs to be extracted according to <code>'selection'</code> and <code>'composite'</code> parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_noise</code></td>
<td>
<p>if <code>TRUE</code> adds normal noise to background using <span class="pkg">Rcpp</span>. Default is <code>TRUE</code>.<br>
Note that it is better to set it to <code>FALSE</code> when <code>'removal'</code> is <code>"masked"</code> or <code>"MC"</code>. Doing so will allow to place masked object in a zero filled background,
otherwise background will still be filled with noise.
This parameter will be repeated with rep_len() from <span class="pkg">base</span> for every physical channel that needs to be extracted according to <code>'selection'</code> and <code>'composite'</code> parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>full_range</code></td>
<td>
<p>only apply when <code>'mode'</code> is not <code>"raw"</code>, if <code>'full_range'</code> is <code>TRUE</code>, then object range will be considered as 0 to 4095, it is like <code>"raw"</code> <code>'mode'</code> but resulting in [0,4095] normalization to [0,1]. Default is <code>FALSE</code>.<br>
This parameter will be repeated with rep_len() from <span class="pkg">base</span> for every physical channel that needs to be extracted according to <code>'selection'</code> and <code>'composite'</code> parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force_range</code></td>
<td>
<p>only apply when <code>'mode'</code> is not <code>"raw"</code>, if <code>'force_range'</code> is <code>TRUE</code>, then range will be adjusted to object range in <code>[-4095,+inf]</code> resulting in normalization to [0,1]. Default is <code>FALSE</code>.<br>
This parameter will be repeated with rep_len() from <span class="pkg">base</span> for every physical channel that needs to be extracted according to <code>'selection'</code> and <code>'composite'</code> parameters.<br>
Note that this parameter takes the precedence over <code>'full_range'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spatial_correction</code></td>
<td>
<p>only apply on RIF file, whether to apply spatial correction. Default is <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When a mask is detected, <code>'add_noise'</code>, <code>'full_range'</code> and <code>'force_range'</code> are set to <code>FALSE</code> and range used will be forced to <code>[0,3]</code>.<br><br>
Range of image is controlled by <code>'Images'</code> information from supplied <code>'info'</code> or as extracted by <code>getInfo</code> and will be returned as <code>'channels'</code> by <code>objectParam</code>.
In case <code>'mode'</code> is not <code>"raw"</code>, '<code>channels$xmin</code>', '<code>channels$xmax</code>', '<code>channels$gamma</code>' will be used for object extraction by <code>objectExtract</code> unless any of <code>'force_range'</code> or <code>'full_range'</code> is <code>TRUE</code>.<br><br>
Experimental (as of v0.2.0.501): once returned by <code>objectParam</code>, those '<code>channels$xmin</code>' and '<code>channels$xmax</code>' can be manually adjusted to <code>]0,1[</code> so as to be used as <code>'probs'</code> argument to quantile to allow quantile normalization during object extraction (<code>objectExtract</code>) afterwards.
</p>


<h3>Value</h3>

<p>an object of class 'IFC_param'.
</p>


</div>