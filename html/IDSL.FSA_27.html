<div class="container">

<table style="width: 100%;"><tr>
<td>msp2TrainingMatrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
msp to Fragmentation Spectra DataBase (FSDB)
</h2>

<h3>Description</h3>

<p>This function creates an aligned table from the spectra in the .msp file
</p>


<h3>Usage</h3>

<pre><code class="language-R">msp2TrainingMatrix(path, MSPfile = "", minDetectionFreq = 1,
selectedFSdbIDs = NULL, dimension = "wide", massAccuracy = 0.01,
allowedNominalMass = FALSE, allowedWeightedSpectralEntropy = TRUE,
noiseRemovalRatio = 0.01, number_processing_threads = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>

<p>Address of .msp file or an FSDB
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MSPfile</code></td>
<td>

<p>A .msp file name or FSDB in .Rdata format
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minDetectionFreq</code></td>
<td>

<p>A minimum detection frequency for an ion across the entire spectra
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>selectedFSdbIDs</code></td>
<td>

<p>selected MSP block/FSDB IDs to limit the screening to specific ion blocks
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dimension</code></td>
<td>

<p>c("wide", "long"). *wide* or *long* alignment matrix output
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>massAccuracy</code></td>
<td>

<p>A mass accuracy (Da)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allowedNominalMass</code></td>
<td>

<p>c(TRUE, FALSE). Select 'TRUE' only for nominal mass analysis.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allowedWeightedSpectralEntropy</code></td>
<td>

<p>c(TRUE, FALSE). Weighted entropy to transform low abundant signals prior to calculating entropy similarity score. Please see the reference for details on wight transformation.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>noiseRemovalRatio</code></td>
<td>

<p>noise removal ratio ([0 - 1])relative to the basepeak to measure entropy similarity score.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>number_processing_threads</code></td>
<td>

<p>Number of processing threads for multi-threaded processing
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A FSDB file (.Rdata) and aligned spectra table (.csv) are stored in the same directory.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
temp_wd &lt;- tempdir() # just a temporary folder
path_extdata &lt;- system.file("extdata", package = "IDSL.FSA")
MSPfile &lt;- "Kynurenine_Kynurenic_acid.msp"
file.copy(from = paste0(path_extdata, "/", MSPfile), to = temp_wd)
msp2TrainingMatrix(path = temp_wd, MSPfile, minDetectionFreq = 1)

</code></pre>


</div>