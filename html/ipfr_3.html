<div class="container">

<table style="width: 100%;"><tr>
<td>balance_secondary_targets</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Balances secondary targets to primary</h2>

<h3>Description</h3>

<p>The average weight per record needed to satisfy targets is computed for both
primary and secondary targets. Often, these can be very different, which leads
to poor performance. The algorithm must use extremely large or small weights
to match the competing goals. The secondary targets are scaled so that they
are consistent with the primary targets on this measurement.
</p>


<h3>Usage</h3>

<pre><code class="language-R">balance_secondary_targets(
  primary_targets,
  primary_seed,
  secondary_targets,
  secondary_seed,
  secondary_importance,
  primary_id
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>primary_targets</code></td>
<td>
<p>A <code>named list</code> of data frames.  Each name in the
list defines a marginal dimension and must match a column from the
<code>primary_seed</code> table. The data frame associated with each named list
element can contain a geography field (starting with "geo_"). If so, each
row in the target table defines a new geography (these could be TAZs,
tracts, clusters, etc.). The other column names define the marginal
categories that targets are provided for. The vignette provides more
detail.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>primary_seed</code></td>
<td>
<p>In population synthesis or household survey expansion, 
this would be the household seed table (each record would represent a 
household). It could also be a trip table, where each row represents an 
origin-destination pair.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>secondary_targets</code></td>
<td>
<p>Same format as <code>primary_targets</code>, but they constrain 
the <code>secondary_seed</code> table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>secondary_seed</code></td>
<td>
<p>Most commonly, if the primary_seed describes
households, the secondary seed table would describe the persons in each
household. Must contain the same <code>primary_id</code> column that links each
person to their respective household in <code>primary_seed</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>secondary_importance</code></td>
<td>
<p>A <code>real</code> between 0 and 1 signifying the 
importance of the secondary targets. At an importance of 1, the function
will try to match the secondary targets exactly. At 0, only the percentage
distributions are used (see the vignette section "Target Agreement".)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>primary_id</code></td>
<td>
<p>The field used to join the primary and secondary seed
tables. Only necessary if <code>secondary_seed</code> is provided.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If multiple geographies are present in the secondary_target table, then
balancing is done for each geography separately.
</p>


<h3>Value</h3>

<p><code>named list</code> of the secondary targets
</p>


</div>