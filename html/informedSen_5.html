<div class="container">

<table style="width: 100%;"><tr>
<td>senmscores</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Computes M-scores for M-tests.
</h2>

<h3>Description</h3>

<p>Computes M-scores for an M-test with one outcome in 1-to-k matched sets, for fixed k&gt;=1.  For the one-sample problem or matched pairs, Maritz (1979) proposed robust tests and confidence intervals based on Huber's (1981) M-estimates.  These tests are extended to matching with several controls in Rosenbaum (2007).
</p>


<h3>Usage</h3>

<pre><code class="language-R">senmscores(y, z, mset, inner = 0, trim = 3, lambda = 1/2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>

<p>A vector of length N for one outcome.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>

<p>A vector whose N coordinates are 1 for treated, 0 for control.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mset</code></td>
<td>

<p>A vector of length N giving the matched set.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inner</code></td>
<td>

<p>See trim.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trim</code></td>
<td>

<p>The two values, inner and trim, define the M-statistic's psi-function. The psi-function is an odd function, psi(y) = -psi(-y), so it suffices to define it for nonnegative y.  For nonnegative y, psi(y) equals 0 for y between 0 and inner, rises linearly from 0 to 1 for y between inner and trim, and equals 1 for y greater than trim.  There are two requirements: inner must be nonnegative, and trim must be larger than inner.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>

<p>A number strictly between 0 and 1.  The M-scores are psi(y/s) where s is the lambda quantile of the within-set absolute pair differences.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The choice of psi-function to increase insensitivity to unmeasured bias is discussed in Rosenbaum (2013), where the parameter inner is proposed.
</p>


<h3>Value</h3>

<p>A vector of length N containing the M-scores.
</p>


<h3>Note</h3>

<p>The function is essentially a wrapper for the mscoresv function in the sensitivitymult package.  It is easier to use senmscores when using the informedSen package.
</p>


<h3>Author(s)</h3>

<p>Paul R. Rosenbaum
</p>


<h3>References</h3>

<p>Huber, P. (1981). Robust Statistics.  NY: Wiley.
</p>
<p>Maritz, J. S. (1979). A note on exact robust condence intervals for location. Biometrika 66, 163-170.
</p>
<p>Rosenbaum, P. R. (2007) Sensitivity analysis for m-estimates, tests and confidence intervals in matched observational studies. Biometrics, 2007, 63, 456-464. &lt;doi:10.1111/j.1541-0420.2006.00717.x&gt;
</p>
<p>Rosenbaum, P. R. (2013). Impact of multiple matched controls on design sensitivity in observational studies. Biometrics 69 118-127. (Introduces inner trimming.) &lt;doi:10.1111/j.1541-0420.2012.01821.x&gt;
</p>
<p>Rosenbaum, P. R. (2015). Two R packages for sensitivity analysis in observational studies. Observational Studies, v. 1. (Free on-line.)
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(HDL)
shdl&lt;-senmscores(HDL$hdl,HDL$z,HDL$mset)
plot(HDL$hdl,shdl)
</code></pre>


</div>