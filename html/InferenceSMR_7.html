<div class="container">

<table style="width: 100%;"><tr>
<td>inference.SMR</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Inference about the standardized mortality ratio (SMR) when evaltuating the effect of a screening program on survival.</h2>

<h3>Description</h3>

<p>This function estimates the expected number of deaths, its variance, the SMR and confidence intervals about the SMR.
</p>


<h3>Usage</h3>

<pre><code class="language-R">inference.SMR(obs.death, normal = "log-smr", alpha = 0.05, contribution,
incid, cox, fuzz = 0.01, Poisson = FALSE, covnames)</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>obs.death</code></td>
<td>

<p>The observed number of deaths for the people participating in the screening program. A numeric value.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>normal</code></td>
<td>

<p>Indicates at which level should the normality assumption be made, either at the SMR level, at the log-SMR level or at the root-SMR level. A character vector containing one or many of the following elements “smr”, “log-smr” and “root-smr”.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>

<p>The nominal error rate of the confidence intervals. A numeric value between 0 and 1, e.g. 0.05 to obtain a 95 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>contribution</code></td>
<td>

<p>An object of contributions produced by the function <code>contrib</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>incid</code></td>
<td>

<p>A matrix containing: the incidences, the value of the covariates and the person-years at risk, in that order. It can be obtained with the function <code>incidences</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cox</code></td>
<td>

<p>An oject of class <code>coxph</code> containing the model that was used to estimate the survival in the cohort of non-participants.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fuzz</code></td>
<td>

<p>Numerical precision is problematic when it comes to test equality between objects. The option <code>fuzz</code> is used to
consider objects not differing by more than <code>fuzz</code> to be equal. The <code>fuzz</code> option should be chosen to be a small
positive number, for instance 0.0001. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Poisson</code></td>
<td>

<p>Indicates whether the incidences' variance should be estimated with a Poisson distribution (TRUE) or a binomial distribution (FALSE). The default is FALSE.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covnames</code></td>
<td>

<p>An alphanumeric vector containing the names of the covariates used to estimate the survival in the cohort of non-participants, that is, the names of the covariates used to obtain the <code>cox</code> object.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>inference.SMR</code> function estimates the expected number of deaths as in Sasieni (2003), estimates the variance of the expected number of deaths and builds confidence intervals as in Talbot et al. (2011). As suggested in the latter, the variance of the observed number of deaths is estimated by the observed number of deaths.
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>expected</code></td>
<td>
<p>The expected number of deaths</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obs.death</code></td>
<td>
<p>The observed number of deaths</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variance</code></td>
<td>
<p>The variance of the expected number of deaths</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smr</code></td>
<td>
<p>The standardized mortality ratio</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smr.var</code></td>
<td>
<p>The variance of the SMR. Only returned if “smr” was given in the <code>normal</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smr.ci</code></td>
<td>
<p>A 1-<code>alpha</code> confidence interval for the SMR. Only returned if “smr” was given in the <code>normal</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logSMR.var</code></td>
<td>
<p>The variance of the natural logarithm of the SMR. Only returned if “log-smr” was given in the <code>normal</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logSMR.ci</code></td>
<td>
<p>A 1-<code>alpha</code> confidence interval for the log-SMR. Only returned if “log-smr” was given in the <code>normal</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rootSMR.var</code></td>
<td>
<p>The variance of the square root of the SMR. Only returned if “root-smr” was given in the <code>normal</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rootSMR.ci</code></td>
<td>
<p>A 1-<code>alpha</code> confidence interval for the root-SMR. Only returned if “root-smr” was given in the <code>normal</code> argument.</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>A complete example of usage is provided in the help page of the <code>screening</code> dataset.
</p>


<h3>Author(s)</h3>

<p>Denis Talbot, Thierry Duchesne, Jacques Brisson, Nathalie Vandal.
</p>


<h3>References</h3>

<p>Sasieni P. (2003) <em>On the expected number of cancer deaths during follow-up of an initially cancer-free cohort</em>.
Epidemiology, 14, 108-110.
</p>
<p>Talbot, D., Duchesne, T., Brisson, J., Vandal, N. (2011) <em>Variance estimation and confidence intervals for the standardized mortality ratio with application to the assessment of a cancer screening program</em>, Statistics in Medicine, 30, 3024-3037. 
</p>


<h3>See Also</h3>

<p><code>est.expDeath</code>, <code>var.expDeath</code>, <code>screening</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">#This example uses pre-built objects and shows the simple usage
#of the est.expDeath function when those objects already exist.
#For an example of how to build those objects, refer to the 
#help page of the screening dataset.

#Estimating the variance can be very long even in this small sample example, e.g. a few hours.
#Remove "#" to run example :
#data(req.objects);
#cox.data = req.objects$cox.data;
#results = inference.SMR(obs.death = sum(screening$deathSCN),
# normal = c("smr", "log-smr", "root-smr"),
#	 alpha = 0.05, req.objects$contribution, req.objects$incid,
#	 cox = req.objects$cox, fuzz = 0.01, Poisson = TRUE, req.objects$covnames);


#********  INFERENCE ABOUT THE SMR  ********* 
#
#Observed =  18  Expected =  33.44264 
#Obs.var. =  18  Exp.var. =  39.38153 
#SMR =  0.5382351 
#
# 95 % Confidence intervals with normality assumption at : 
#
#The SMR level : ( 0.2204119 0.8560583 )
#
#The log-SMR level : ( 0.2982118 0.9714471 )
#
#The root-SMR level : ( 0.2673299 0.9029762 )

#results
#
#$expected
#[1] 33.44264
#
#$obs.death
#[1] 18
#
#$variance
#            2
#[1,] 39.38153
#
#$smr
#[1] 0.5400112
#
#$smr.var
#              2
#[1,] 0.02629511
#
#$smr.ci
#[1] 0.2204119 0.8560583
#
#$logSMR.var
#              2
#[1,] 0.09076763
#
#$logSMR.ci
#[1] 0.2982118 0.9714471
#
#$rootSMR.var
#              2
#[1,] 0.01221358
#
#$rootSMR.ci
#[1] 0.2673299 0.9029762



</code></pre>


</div>