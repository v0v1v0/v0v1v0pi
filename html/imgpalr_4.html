<div class="container">

<table style="width: 100%;"><tr>
<td>image_quantmap</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Quantize an image using an existing color palette</h2>

<h3>Description</h3>

<p>Quantize image colors by mapping all pixels to the nearest color in RGB space,
respectively, given an arbitrary palette.
</p>


<h3>Usage</h3>

<pre><code class="language-R">image_quantmap(
  file,
  pal,
  pal2 = NULL,
  k = 100,
  plot = FALSE,
  show_pal = TRUE,
  labels = TRUE,
  label_size = 1,
  label_color = "#000000",
  keep_asp = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>if character, file path or URL to an image. You can also provide
an RGB array from an already loaded image file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pal</code></td>
<td>
<p>character, vector of hex colors, the color palette used to
quantize the image colors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pal2</code></td>
<td>
<p>character, optional vector of hex colors, same length as <code>pal</code>.
After quantizing image to <code>pal</code>, you can subsequently remap <code>pal</code> to <code>pal2</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>integer, the number of k-means cluster centers to consider in the
image. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>logical, plot the palette with quantized image reference thumbnail.
If <code>FALSE</code>, only return the RGB array.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_pal</code></td>
<td>
<p>logical, show the palette like with <code>image_pal()</code>. If <code>FALSE</code>,
plot only the image; all subsequent arguments ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>logical, show hex color values in plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label_size</code></td>
<td>
<p>numeric, label size in plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label_color</code></td>
<td>
<p>text label color.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep_asp</code></td>
<td>
<p>logical, adjust rectangles in plot to use the image aspect ratio.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The palette <code>pal</code> does not need to be related to the image colors. Each pixel
will be assigned to whichever color in <code>pal</code> that it is nearest to in RGB space.
You can use <code>pal2</code> to remap to arbitrary colors after quantizing. This function
returns the new RGB array. You can plot a preview just like with <code>image_pal()</code>
using <code>plot = TRUE</code>. The number of k-means centers <code>k</code> is for binning image
colors prior to mapping the palette <code>pal</code>. It is limited by the number of
unique colors in the image. Larger <code>k</code> provides more binned distances between
image colors and palette colors, but takes longer to run.
</p>


<h3>Value</h3>

<p>an RGB array with values ranging from 0 to 1
</p>


<h3>See Also</h3>

<p><code>image_pal()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">x &lt;- system.file("blue-yellow.jpg", package = "imgpalr")
pal &lt;- c("black", "navyblue", "dodgerblue", "yellow")
pal2 &lt;- c("darkred", "darkgreen", "tomato", "orange")

a &lt;- image_quantmap(x, pal, k = 7, plot = TRUE)
str(a)

a &lt;- image_quantmap(x, pal, pal2, k = 7, plot = TRUE)
</code></pre>


</div>