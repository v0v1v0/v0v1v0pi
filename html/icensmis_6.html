<div class="container">

<table style="width: 100%;"><tr>
<td>icpower.val</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Study design in the presence of error-prone diagnostic tests and 
self-reported outcomes when sensitivity and specificity are unkonwn and a 
validation set is used</h2>

<h3>Description</h3>

<p>This function calculates the power and sample size in the presence of 
error-prone diagnostic tests and self-reported outcomes when both sensitivity
and specificity are unknown. In this case, a subject of the subjects receive 
both gold standard test and error-prone test at each non-missing visit. The 
remaining subjects receive only error-prone test. Here, for the validation 
set, NTFP refers to no test after first positive result from the gold 
standard test. Both sensitivity and specificity are treated as unknown 
parameters in this setting.
</p>


<h3>Usage</h3>

<pre><code class="language-R">icpower.val(
  HR,
  sensitivity,
  specificity,
  survivals,
  N = NULL,
  power = NULL,
  rhoval,
  rho = 0.5,
  alpha = 0.05,
  pmiss = 0,
  design = "MCAR",
  designval = "MCAR",
  negpred = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>HR</code></td>
<td>
<p>hazard ratio under the alternative hypothesis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sensitivity</code></td>
<td>
<p>the sensitivity of test.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>specificity</code></td>
<td>
<p>the specificity of test</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>survivals</code></td>
<td>
<p>a vector of survival function at each test time for 
baseline(reference) group. Its length determines the number of tests.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>a vector of sample sizes to calculate corresponding powers. If one 
needs to calculate sample size, then set to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>power</code></td>
<td>
<p>a vector of powers to calculate corresponding sample sizes. If 
one needs to calculate power, then set to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rhoval</code></td>
<td>
<p>proportion of subjects in validation set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho</code></td>
<td>
<p>proportion of subjects in baseline(reference) group.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>type I error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pmiss</code></td>
<td>
<p>a value or a vector (must have same length as survivals) of the 
probabilities of each test being randomly missing at each test time. If 
pmiss is a single value, then each test is assumed to have an identical 
probability of missingness.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>design</code></td>
<td>
<p>missing mechanism: "MCAR" or "NTFP".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>designval</code></td>
<td>
<p>missing mechanism of validation set: "MCAR" or "NTFP".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>negpred</code></td>
<td>
<p>baseline negative predictive value, i.e. the probability of 
being truely disease free for those who were tested (reported) as disease 
free at baseline. If baseline screening test is perfect, then negpred = 1.</p>
</td>
</tr>
</table>
<h3>Value</h3>

 <ul>
<li>
<p> result: a data frame with calculated sample size and
power </p>
</li>
<li>
<p> IR1 and IR2: calculated unit Fisher information matrices for each
group in non-validation set </p>
</li>
<li>
<p> IV1 and IV2: calculated unit Fisher
information matrices for each group in validation set </p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">surv &lt;- exp(log(0.9)*(1:8)/8)
pow &lt;- icpower.val(HR = 2, sensitivity = 0.55, specificity = 0.99, 
   survivals = surv, power = 0.9, rhoval=0.05, design= "NTFP", designval = "NTFP")
pow$result

</code></pre>


</div>