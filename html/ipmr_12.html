<div class="container">

<table style="width: 100%;"><tr>
<td>define_kernel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Functions to initialize and define IPM kernels</h2>

<h3>Description</h3>

<p>Adds a new kernel to the <code>proto_ipm</code> structure.
</p>


<h3>Usage</h3>

<pre><code class="language-R">define_kernel(
  proto_ipm,
  name,
  formula,
  family,
  ...,
  data_list = list(),
  states,
  uses_par_sets = FALSE,
  par_set_indices = list(),
  age_indices = list(),
  evict_cor = FALSE,
  evict_fun = NULL,
  integrate = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>proto_ipm</code></td>
<td>
<p>The name of the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>The name of the new kernel.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>A bare expression specifying the form of the kernel.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>
<p>The type of kernel. Options are <code>"CC"</code> for continuous to continuous
transitions, <code>"DC"</code> for discrete to continuous (e.g. emergence from a seedbank),
<code>"CD"</code> for continuous to discrete (e.g. entering a seedbank), and <code>"DD"</code> for
discrete to discrete (e.g. stasis in a seedbank).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>A set of named expressions that correspond
to vital rates in <code>formula</code>. Parameter set index syntax is supported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_list</code></td>
<td>
<p>A list of named values that correspond to constants in the formula
and vital rate expressions in <code>...</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>states</code></td>
<td>
<p>A list with character vector containing the names of each state
variable used in the kernel.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>uses_par_sets</code></td>
<td>
<p>A logical indicating whether or not the parameters in the kernel and/or its
underlying vital rates are derived from sets. See the
introduction vignette for this feature for more details
(<code>vignettes(ipmr-introduction', package = 'ipmr')}, and
\code{vignettes( index-notation', package = 'ipmr')</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>par_set_indices</code></td>
<td>
<p>A named list with vectors corresponding to the values
the index variable can take. The names should match the suffixes used
in the vital rate expressions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age_indices</code></td>
<td>
<p>If <code>init_ipm(uses_age = TRUE)</code>, a list with possibly
2 entries: 1. <code>"age"</code>: the range
of possible ages in the model and, optionally, 2. <code>"max_age"</code>: the maximum
age individuals in the model can attain. Otherwise, not used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>evict_cor</code></td>
<td>
<p>A logical indicating whether an eviction correction should be applied
to the kernel.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>evict_fun</code></td>
<td>
<p>If <code>evict_cor = TRUE</code>, then a function that corrects for it.
Currently, only <code>truncated_distributions</code> and <code>discrete_extrema</code> are
possible.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>integrate</code></td>
<td>
<p>For <code>simple_*</code> models, this controls whether a <code>"d_z"</code>
is automatically appended to the <code>formula</code> argument. When <code>TRUE</code>,
this automatically generates <code>formula * d_z</code>. There may be some cases where
this behavior is not desirable. Set this to <code>FALSE</code> and specify the correct
form if needed. The default is <code>TRUE</code>. This argument is ignored for
all <code>general_*</code> models.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Different classes of IPMs may have many or only a few kernels. Each
one requires its own call to <code>define_kernel</code>, though there are some exceptions,
namely for kernels derived for models derived from parameter sets (e.g. vital
rate models fit across plots and years).
</p>
<p>A much more complete overview of how to generate kernels is provided in
<code>vignette("ipmr-introduction", "ipmr")</code>.
</p>


<h3>Value</h3>

<p>A <code>proto_ipm</code>.
</p>


</div>